{% extends 'FanFerretQuestionBundle:Admin:base.html.twig' %}

{% block content %}
<h1>Your Surveys</h1>
<div class="fanferret-result-count">{{count}} results</div>
{% block pagination %}
{% include 'FanFerretQuestionBundle:Admin:pagination.html.twig' with {'route': 'fgms_question_admin', 'args': {'perpage': per_page}, 'page': page, 'pages': pages} %}
{% endblock %}
<table class="table">
	<thead>
		<tr>
			<th>Group</th>
			<th>Property</th>
			<th>Survey</th>
			<th>Delivery</th>
			<th>Comment Cards</th>
		</tr>
	</thead>
	<tbody>
		{% for survey in surveys %}
		<tr>
			{% set args = {'property': survey.survey.property.slug, 'survey': survey.survey.slug} %}
			{% set route_suffix = '' %}
			<td>
				{% if survey.survey.property.group %}
				{% set route_suffix = '_group' %}
				{% set args = args|merge({'group': survey.survey.property.group.slug}) %}
				{{survey.survey.property.group.name}}
				{% endif %}
			</td>
			<td>{{survey.survey.property.name}}</td>
			<td>{{survey.survey.name}}</td>
			<td>
				{% if survey.delivery %}
				<a class="btn btn-primary" href="{{path('fgms_question_admin_delivery' ~ route_suffix,args)|escape('html_attr')}}">Schedule</a>
				{% endif %}
			</td>
			<td>
				{% if survey.comment_cards %}
				<a class="btn btn-primary" href="{{path('fgms_question_admin_comment_cards' ~ route_suffix,args)|escape('html_attr')}}">View All</a>	
				{% endif %}
			</td>
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endblock %}