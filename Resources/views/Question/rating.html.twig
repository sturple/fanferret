{% set show_explanations = true %}
{% if entity.order != 0 %}
{% set show_explanations = entity.questionGroup.questions[entity.order - 1].type != 'rating' %}
{% endif %}
<section id="{{name|escape('html_attr')}}" class="fanferret-question fanferret-rating {% if explain %}fanferret-rating-explain{% endif %}">
	{% if show_explanations %}
	<div class="row">
		<div class="col-md-7"></div>
		<div class="col-md-5 fanferret-rating-explanations hidden-sm hidden-xs">
			<div class="fanferret-rating-explanation"><span class="fa fa-smile-o"></span> Excellent</div>
			<div class="fanferret-rating-explanation"><span class="fa fa-meh-o"></span> Average</div>
			<div class="fanferret-rating-explanation"><span class="fa fa-frown-o"></span> Poor</div>
		</div>
	</div>
	{% endif %}
	<div class="row">
		<div class="fanferret-question-title col-md-7">{{title}}</div>
		<div class="fanferret-question-input col-md-5">
			{% if show_explanations %}
			<div class="fanferret-rating-explanations hidden-md hidden-lg">
				<div class="fanferret-rating-explanation"><span class="fa fa-smile-o"></span> Excellent</div>
				<div class="fanferret-rating-explanation"><span class="fa fa-meh-o"></span> Average</div>
				<div class="fanferret-rating-explanation"><span class="fa fa-frown-o"></span> Poor</div>
			</div>
			{% endif %}
			<ul class="fanferret-rating-ratings">
				{% for i in 1..5 %}
				<li class="fanferret-rating-rating">
					<a href="javascript:void(0);" data-value="{{6-i|escape('html_attr')}}">{{6-i}}</a>
				</li>
				{% endfor %}
			</ul>
		</div>
	</div>
	{% if explain %}
	<div class="fanferret-rating-explain-input" style="display:none;">
		{{prompt}} <textarea></textarea>
	</div>
	{% endif %}
</section>
{% if explain %}
{% set threshold = explain.threshold %}
{% set condition = explain.condition %}
{% else %}
{% set threshold = null %}
{% set condition = null %}
{% endif %}
{% include 'FanFerretQuestionBundle:Question:add.html.twig' with {'name': name, 'dependency': 'rating', 'arguments': [threshold, condition]} %}